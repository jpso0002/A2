<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Australian Migration Flows by SA4 (2024)</title>

  <!-- Vega stack -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Your external stylesheet (optional to expand later) -->
  <link rel="stylesheet" href="css/styles.css"/>
</head>
<body>
  <header class="container">
    <h1>Australian Migration Flows by SA4 (2024)</h1>
    <p class="sub">Internal vs. overseas migration patterns across Statistical Areas Level 4 (SA4)</p>
  </header>

  <!-- Overview -->
  <section class="container">
    <div class="card">
      <h2>Overview</h2>
      <p class="muted placeholder">
        Australia’s population shifts in two main ways: people move between regions within the country and people arrive from (or depart to) overseas. Net Internal Migration (NIM) measures the balance of people moving into an SA4 region from other Australian regions minus those leaving it. Net Overseas Migration (NOM) measures the balance of people entering Australia from abroad to live in a region minus those departing overseas. This project maps both streams at the SA4 level, standardises them per 1,000 residents to compare places of different sizes, and combines them to show total net migration pressures and pulls.
      </p>
    </div>
  </section>

  <!-- NIM Choropleth (Full width) -->
  <section class="container">
    <h2>Net Internal Migration (NIM) — SA4 (2024)</h2>
    <div id="nim-choropleth" class="chart full"></div>
    <div class="card" style="margin-top: var(--gap);">
      <h3>About this map</h3>
      <div class="twocol">
        <p class="muted placeholder">
          This choropleth shows Net Internal Migration (NIM) per 1,000 residents for 2024 so warmer tones indicate net inflows and cooler tones indicate net outflows. The geography is at the SA4 regions level, which captures broad labour-market regions suitable for spotting big-picture patterns rather than suburb-level detail. Values are a single-year snapshot, not cumulative across years, and are standardised by mid-year population so regions of different sizes can be compared fairly. 
        </p>
        <p class="muted placeholder">
          Data are drawn from ABS regional population components for SA4s; the metric includes only internal moves within Australia, excluding all overseas arrivals or departures.
        </p>
        <p class="muted placeholder">
          We expect to see net inflows clustering in outer-metropolitan growth corridors and selected regional hubs, while some inner-city SA4s may show net outflows tied to housing costs and life-stage churn. As seen the Queensland outback region has seen a significant outflow of internal residents whilst many areas in the east coast have seen large inflows per 1000 people.
        </p>
        <p class="muted placeholder">
Rates in small or rapidly changing SA4s can swing from year to year, and factors like student cycles, housing supply shifts, or one-off events may skew a single year’s result, so it is important not to over analyse such areas. 
        </p>
        <p class="muted placeholder">
We will compare this map with the NOM choropleth below: where patterns overlap, growth is broad-based; where they diverge, and we can infer whether a region’s change is driven mainly by domestic re-sorting (NIM) or by overseas arrivals (NOM)—a clue to the composition and persistence of local population change.
        </p>
      </div>
    </div>
  </section>

  <!-- NOM Choropleth (Full width) -->
  <section class="container">
    <h2>Net Overseas Migration (NOM) — SA4 (2024)</h2>
    <div id="nom-choropleth" class="chart full"></div>
    <div class="card" style="margin-top: var(--gap);">
      <h3>About this map</h3>
      <div class="twocol">
        <p class="muted placeholder">
Net Overseas Migration (NOM) is the balance of people arriving from overseas to live in Australia minus those departing overseas, standardised here as NOM per 1,000 residents for SA4 regions in 2024. Because overseas arrivals cluster where universities, jobs, and settlement services are concentrated, you’ll often see higher rates in capital-city cores, inner suburbs, and student hubs with large rental markets. This is a single-year snapshot, not a cumulative trend.        </p>
        <p class="muted placeholder">
Comparing this alongside the NIM map to see what’s driving growth we see that some SA4s show strong NOM inflows but flat or negative NIM. These are typically inner-city university belts attracting international students and recent migrants even as locals move outward for space or affordability. Conversely, outer-metropolitan growth corridors may post positive NIM but only modest NOM, reflecting domestic re-sorting rather than overseas arrivals.         </p>
        <p class="muted placeholder">
As mentioned on the NIM map Queensland – Outback region actually has an inflow of overseas migration where as some of the east coast locations have inflows of both overseas and internal migration.        </p>
      </div>
    </div>
  </section>

  <!-- Toggle Bar Chart: Top 6 NIM / NOM -->
  <section class="container">
    <h2>Top 6 Regions by Migration (Toggle NIM / NOM)</h2>
    <div class="controls">
      <label><input type="radio" name="metricToggle" value="NIM" checked> Show Top 6 NIM</label>
      <label><input type="radio" name="metricToggle" value="NOM"> Show Top 6 NOM</label>
      <span class="muted placeholder">Toggle will switch the bar chart between NIM and NOM.</span>
    </div>
    <div class="split">
      <div id="top6-bar" class="chart"></div>
      <div class="card">
        <h3>Interpretation</h3>
        <p class="muted placeholder">
          Summarize which regions appear in the top 6 for each metric and why. Mention urban vs regional dynamics, student inflows, housing, or employment hubs.
        </p>
      </div>
    </div>
  </section>

  <!-- Total Migration (NIM + NOM) -->
  <section class="container">
    <h2>Total Migration (NIM + NOM) — Highest Regions Overall</h2>
    <div class="split">
      <div id="total-migration-chart" class="chart"></div>
      <div class="card">
        <h3>What “Total” Shows</h3>
        <p class="muted placeholder">
          Explain combining NIM and NOM to show overall net migration pressure. Note methodological choices (same year, additive approach, handling negatives), and call out standout SA4s.
        </p>
      </div>
    </div>
  </section>

  <!-- Sources -->
  <footer class="container">
    <h2>Sources</h2>
    <div class="sources">
      <div class="card">
        <h3>Data Source 1</h3>
        <p class="muted placeholder">ABS / Home Affairs / Centre for Population dataset details, years, and download link.</p>
      </div>
      <div class="card">
        <h3>Data Source 2</h3>
        <p class="muted placeholder">population change dataset details, years, and download link.</p>
      </div>
    </div>
  </footer>

  <!-- Embeds (point these to your actual spec files when ready) -->
  <script>
    // NIM choropleth (you already have a spec – update the path if needed)
    vegaEmbed('#nim-choropleth', 'js/nim_choropleth.json', {actions:false})
      .catch(err => console.error('NIM embed failed:', err));

    // NOM choropleth (duplicate of the NIM spec but mapped to NOM — to be created)
    vegaEmbed('#nom-choropleth', 'js/nom_choropleth.json', {actions:false})
      .catch(err => console.error('NOM embed failed:', err));

    // Top 6 bar (toggle between NIM/NOM). For now, just load a placeholder spec.
    // Later, wire the radio buttons to swap datasets or filter parameter in the spec.
    let currentMetric = 'NIM';
    const top6SpecByMetric = {
      NIM: 'js/top6_bar_nim.json',
      NOM: 'js/top6_bar_nom.json'
    };

    function renderTop6(metric) {
      vegaEmbed('#top6-bar', top6SpecByMetric[metric], {actions:false})
        .catch(err => console.error('Top 6 embed failed:', err));
    }
    renderTop6(currentMetric);

    document.querySelectorAll('input[name="metricToggle"]').forEach(r => {
      r.addEventListener('change', (e) => {
        currentMetric = e.target.value;
        renderTop6(currentMetric);
      });
    });

    // Total migration chart (to be designed: could be bar, dot plot, ranked map, etc.)
    vegaEmbed('#total-migration-chart', 'js/total_migration.json', {actions:false})
      .catch(err => console.error('Total migration embed failed:', err));
  </script>
</body>
</html>
